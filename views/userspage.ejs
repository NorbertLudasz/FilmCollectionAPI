<!DOCTYPE html>
<html>
  <head>
  <%- include('partials/headallfilms.ejs', { title: 'Users' }) %>
</head>
  <body>
    <%- include('partials/navbar.ejs') %>
    <p>Filter</p>
    <form name="searchform" action="/searchUsers" method="POST" enctype="application/x-www-form-urlencoded">
      <label for="nevsearch">Nev:</label><input name="nevsearch" id="nevsearch" type="text" pattern="[a-zA-Z]*" required>
      <input type="submit" value="Filter" id="submit4">
    </form>
    <h1>All Users</h1>
    <% if (users.length) { %>
      <table>
        <tr><th>Name</th><th>Role</th><th>Designate as admin</th><th>Remove admin rights</th></tr>
        <% users.forEach((user) => { %>
          <div id="divrowjq"><tr id="rowjq">
            <td id="nevjq"><%= user.nev %></td>
            <td id="rolejq"><code><%= user.szerep %></code></td>
            <td><button id="setadmin/<%= user.id %>" onclick="setadmin(<%= user.id %>)">Designate as Admin</button></td>
            <td><button id="setnotadmin/<%= user.id %>" onclick="setnotadmin(<%= user.id %>)">Remove admin rights</button></td>
          </tr>
          </div>
        <% }) %>
      </table>
    <% } else { %>
      <p class="message">No users to show</p>
    <% } %>

    <div class="roleupdatedmsg" id="roleupdatedmsg"></div>

  </body>
</html>